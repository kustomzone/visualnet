<head>
    <style> body { margin: 0; } </style>
  
    <script src="http://unpkg.com/3d-force-graph"></script>
    <script src="../app/spider/iitk.ac.in.spiderFull.js"></script>
    <!--<script src="../../dist/3d-force-graph.js"></script>-->
</head>

<body>
    <div id="3d-graph"></div>

    <script>
      // Random tree
      const NODES = 300;
      const GROUPS = 12;

      // const gData = {
      //   nodes: [...Array(NODES).keys()].map(i => ({
      //     id: i,
      //     group: Math.ceil(Math.random() * GROUPS)
      //   })),
      //   links: [...Array(NODES).keys()]
      //     .filter(id => id)
      //     .map(id => ({
      //       source: id,
      //       target: Math.round(Math.random() * (id-1))
      //     }))
      // }
      const gData = spiderJson;

      gData["nodes"] = gData["nodes"].map(node => ({
        id: node.id,
        url: node.url,
        old_rank: node.old_rank,
        new_rank: node.new_rank
      }));

      gData["links"] = gData["links"].map(link => ({
        source: gData.nodes.find(node => node.id === link.source.id),
        target: gData.nodes.find(node => node.id === link.target.id),
        value: 3
      }));

      const Graph = ForceGraph3D()
      (document.getElementById('3d-graph'))
        .graphData(gData);
    </script>
</body>
